{{define "content"}}

{{ range $m := .flashes }}
<div class="alert alert-success alert-dismissable">
<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
    {{ $m }}
</div>
{{ end }}

<div class="panel panel-primary">
  <div class="clearfix panel-heading">
      <h3 style="display: inline" class="panel-title"><i class="fa fa-key fa-lg"></i> SSH Public Keys </h3>
         <div class="btn-toolbar pull-right">
        <div class="btn-group">
        <a href="/sshpubkey/new" id="newkey" class="btn btn-default btn-sm">New SSH Key</a>
        </div>
        </div>
  </div>
  <div class="panel-body">

    {{ range $i, $fp := .user.SSHPubKeyFps }}
    <div class="media">
     <div class="media-left"> 
        <a href="#"><i class="fa fa-key fa-3x"></i></a>
     </div>
     <div class="media-body">
     <h4 class="media-heading">SSH Fingerprint: </h4>
     <p><code>{{ $fp }}</code></p>
     <button class="btn btn-default" data-href="/sshpubkey/remove/{{ $i }}" data-toggle="modal" data-target="#confirm-delete">
         Delete
     </button>
     </div> 
    </div> 
    {{ else }}
        <p>No ssh keys uploaded</p>
    {{ end }}

  </div>
</div>

<div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Are you sure you want to delete this SSH key?</h4>
      </div>
      <div class="modal-body">
        <p>This action <strong>CANNOT</strong> be undone. This will permanently delete
        the SSH key and if you'd like to use it in the future, you will
        need to upload it again.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <a class="btn btn-danger btn-ok">Delete</a>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<script>
$(function(){
    $('#confirm-delete').on('show.bs.modal', function(e) {
        $(this).find('.btn-ok').attr('href', $(e.relatedTarget).data('href'));
    });
});
</script>

{{end}}
